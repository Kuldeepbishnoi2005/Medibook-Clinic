<%- include('partials/header') %>

<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card border-0 shadow-sm print-card">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-start mb-3">
          <div>
            <h4 class="mb-0">Appointment Invoice</h4>
            <small class="text-muted">MediBook</small>
          </div>
          <div class="text-end small">
            <div>Invoice #: <strong><%= appt.id %></strong></div>
            <div>Date: <strong><%= formatDate(appt.created_at) %></strong></div>
          </div>
        </div>

        <hr />

        <div class="row mb-3">
          <div class="col-md-6 small">
            <h6 class="fw-semibold">Patient</h6>
            <div><strong><%= appt.user_name %></strong></div>
            <div class="text-muted"><%= appt.user_email %></div>
          </div>
          <div class="col-md-6 small">
            <h6 class="fw-semibold">Doctor</h6>
            <div><strong><%= appt.doctor_name %></strong></div>
            <div class="text-muted"><%= appt.specialty_name %></div>
          </div>
        </div>

        <div class="row mb-3 small">
          <div class="col-md-4">
            <h6 class="fw-semibold">Appointment</h6>
            <div>Date: <strong><%= formatDate(appt.appointment_date) %></strong></div>
            <div>Time: <strong><%= formatTime(appt.appointment_time) %></strong></div>
          </div>
          <div class="col-md-4">
            <h6 class="fw-semibold">Status</h6>
            <div>Appointment: <strong><%= appt.status %></strong></div>
            <div>
              Payment:
              <strong>
                <% if (appt.payment_status === 'paid') { %>
                  Paid (online)
                <% } else if (appt.payment_status === 'failed') { %>
                  Failed
                <% } else if (appt.payment_status === 'not_required') { %>
                  To be paid at clinic
                <% } else { %>
                  Pending (to be paid)
                <% } %>
              </strong>
            </div>
          </div>
          <div class="col-md-4">
            <h6 class="fw-semibold">Amount</h6>
            <div>Consultation fee:</div>
            <div class="fs-5 fw-semibold">â‚¹<%= appt.fee %></div>
          </div>
        </div>

        <hr />

        <p class="small text-muted mb-4">
          This invoice is generated for your appointment booking. Payment is usually collected
          by the clinic at the time of visit unless already settled. Please carry this slip
          or show it on your phone when you visit.
        </p>

        <div class="d-flex justify-content-between align-items-center no-print">
          <a href="/my-appointments" class="btn btn-outline-secondary rounded-pill">
            Back to My Appointments
          </a>
          <button type="button" class="btn btn-primary rounded-pill" onclick="window.print()">
            <i class="bi bi-printer me-1"></i> Print
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>