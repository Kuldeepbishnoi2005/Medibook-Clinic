<%- include('partials/header', { activePage: 'admin-holidays' }) %>

<h2 class="section-title mb-3">Clinic Holidays</h2>
<p class="small text-muted mb-3">
  Set clinic holidays / closed days. Patients will not be able to book on these dates.
</p>

<div class="row g-3 mb-3">
  <div class="col-md-6">
    <div class="card border-0 shadow-sm">
      <div class="card-body">
        <h6 class="fw-semibold mb-2">Add Holiday</h6>
        <form method="POST" action="/admin/holidays/new">
          <div class="mb-2">
            <label class="form-label small">Date</label>
            <input
              type="date"
              name="holiday_date"
              class="form-control form-control-sm rounded-3"
              required
              min="<%= formatDate(new Date()) %>"
            />
          </div>
          <div class="mb-2">
            <label class="form-label small">Reason (optional)</label>
            <input
              type="text"
              name="reason"
              class="form-control form-control-sm rounded-3"
              placeholder="e.g. Public holiday, maintenance"
            />
          </div>
          <button type="submit" class="btn btn-primary btn-sm rounded-pill mt-2">
            Add Holiday
          </button>
        </form>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card border-0 shadow-sm">
      <div class="card-body">
        <h6 class="fw-semibold mb-2">Existing Holidays</h6>
        <div class="table-responsive">
          <table class="table table-sm mb-0">
            <thead>
              <tr>
                <th>Date</th>
                <th>Reason</th>
                <th class="text-end">Action</th>
              </tr>
            </thead>
            <tbody>
              <% if (!holidays.length) { %>
              <tr>
                <td colspan="3" class="small text-muted text-center py-2">
                  No holidays set.
                </td>
              </tr>
              <% } %>
              <% holidays.forEach(function(h) { %>
              <tr>
                <td class="small"><%= formatDate(h.holiday_date) %></td>
                <td class="small text-muted"><%= h.reason || '-' %></td>
                <td class="text-end">
                  <form method="POST"
                        action="/admin/holidays/<%= h.id %>/delete"
                        onsubmit="return confirm('Remove this holiday?');">
                    <button type="submit" class="btn btn-sm btn-outline-danger rounded-pill">
                      Delete
                    </button>
                  </form>
                </td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>